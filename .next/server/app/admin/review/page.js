(()=>{var e={};e.id=403,e.ids=[403],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},12119:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(74378),s(61193),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["review",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,74378)),"C:\\Users\\mohan\\OneDrive\\Desktop\\ecommerce\\src\\app\\admin\\review\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,61193)),"C:\\Users\\mohan\\OneDrive\\Desktop\\ecommerce\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mohan\\OneDrive\\Desktop\\ecommerce\\src\\app\\admin\\review\\page.tsx"],u="/admin/review/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/review/page",pathname:"/admin/review",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},74414:(e,t,s)=>{Promise.resolve().then(s.bind(s,60757))},60757:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(10326),a=s(17577),i=s(76),n=s(90445),l=s(35047),o=s(46226);function d(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)(!1),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[p,x]=(0,a.useState)("pending"),[g,h]=(0,a.useState)(""),[b,v]=(0,a.useState)([0,5]),[j,f]=(0,a.useState)("date"),[w,y]=(0,a.useState)(""),[N,S]=(0,a.useState)(1),[C,D]=(0,a.useState)(null),k=async()=>{let[e,t]=await Promise.all([(0,i.PL)((0,i.hJ)(n.db,"reviews")),(0,i.PL)((0,i.hJ)(n.db,"products"))]),s=t.docs.map(e=>({id:e.id,...e.data()})),r=e.docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.created_at?.toDate?.()||null}});m(s),c(r)},q=e=>u.find(t=>t.id===e.productId)||{},P=async e=>{await (0,i.r7)((0,i.JU)(n.db,"reviews",e),{status:"approved"}),k()},O=async e=>{confirm("Delete this review?")&&(await (0,i.oe)((0,i.JU)(n.db,"reviews",e)),k())},_=async()=>{C&&(await (0,i.r7)((0,i.JU)(n.db,"reviews",C.id),{name:C.name,message:C.message,rating:C.rating,status:C.status,dateOfSubmit:C.dateOfSubmit instanceof Date?C.dateOfSubmit:new Date(C.dateOfSubmit)}),D(null),k())},A=d.filter(e=>e.status===p).filter(e=>{let t=q(e);return(!g||t.category===g)&&e.rating>=b[0]&&e.rating<=b[1]&&(e.name?.toLowerCase().includes(w.toLowerCase())||t.name?.toLowerCase().includes(w.toLowerCase()))}).sort((e,t)=>"date"===j?(t.createdAt?.getTime()||0)-(e.createdAt?.getTime()||0):t.rating-e.rating),E=A.slice((N-1)*40,40*N);return t?(0,r.jsxs)("div",{className:"mt-20 max-w-6xl mx-auto p-4",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>e.push("/admin"),className:"bg-gray-700 text-white px-2 py-2 rounded hover:bg-gray-800",children:"← Go to Home"}),r.jsx("h2",{className:"text-2xl font-bold ml-2",children:"\uD83D\uDCDD Review Moderation"})]}),r.jsx("div",{className:"flex gap-4 mb-4 border-b border-gray-200",children:["pending","approved","rejected"].map(e=>{let t=d.filter(t=>t.status===e).length;return(0,r.jsxs)("button",{onClick:()=>x(e),className:`py-2 px-4 capitalize font-medium transition border-b-2 flex items-center gap-1 ${p===e?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-green-600"}`,children:[e," ",r.jsx("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded",children:t})]},e)})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4 items-center",children:[(0,r.jsxs)("select",{value:g,onChange:e=>h(e.target.value),className:"border p-2 rounded",children:[r.jsx("option",{value:"",children:"All Categories"}),["Weight Management","Enhancers","Energy & Fitness","Children's Health","Women's Health","Men's Health","Bone & Joint Health","Digestive Health","Sports Nutritions","Skin & Body Care","Male Enhancement"].map(e=>r.jsx("option",{children:e},e))]}),r.jsx("input",{type:"text",placeholder:"\uD83D\uDD0E Search name/product",value:w,onChange:e=>y(e.target.value),className:"border p-2 rounded w-64"}),(0,r.jsxs)("select",{value:j,onChange:e=>f(e.target.value),className:"border p-2 rounded",children:[r.jsx("option",{value:"date",children:"Sort by Date"}),r.jsx("option",{value:"rating",children:"Sort by Rating"})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(e=>{let t=q(e);return(0,r.jsxs)("div",{className:"border rounded p-3 bg-white shadow relative",children:[t.image&&r.jsx(o.default,{src:t.image,alt:t.name,width:48,height:48,className:"absolute top-2 right-2 rounded",loading:"lazy"}),(0,r.jsxs)("p",{className:"font-semibold",children:[e.name," (","★".repeat(e.rating),"☆".repeat(5-e.rating),")"]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.createdAt?.toLocaleString()||"No Date"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Product: ",t.name||"Unknown"]}),r.jsx("p",{className:"text-gray-700 text-sm",children:e.message}),(0,r.jsxs)("div",{className:"mt-3 flex gap-2",children:["pending"===e.status&&r.jsx("button",{onClick:()=>P(e.id),className:"text-sm px-2 py-1 bg-green-600 text-white rounded",children:"Approve"}),r.jsx("button",{onClick:()=>O(e.id),className:"text-sm px-2 py-1 bg-red-600 text-white rounded",children:"Delete"}),r.jsx("button",{onClick:()=>D(e),className:"text-sm px-2 py-1 bg-blue-600 text-white rounded",children:"Edit"})]})]},e.id)})}),r.jsx("div",{className:"mt-6 flex justify-center gap-2",children:Array.from({length:Math.ceil(A.length/40)},(e,t)=>r.jsx("button",{onClick:()=>S(t+1),className:`px-3 py-1 border rounded ${N===t+1?"bg-blue-600 text-white":"bg-white"}`,children:t+1},t))}),C&&r.jsx("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded max-w-md w-full",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-1",children:["Created At: ",C.createdAt?.toLocaleString()]}),r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Submit:"}),r.jsx("input",{type:"date",className:"border w-full p-2 mb-4",value:C.dateOfSubmit?.seconds?new Date(1e3*C.dateOfSubmit.seconds).toISOString().slice(0,10):C.dateOfSubmit?new Date(C.dateOfSubmit).toISOString().slice(0,10):"",onChange:e=>{let t=new Date(e.target.value);t.setHours(0,0,0,0),D({...C,dateOfSubmit:t})}}),r.jsx("label",{className:"block text-sm mb-1",children:"Name"}),r.jsx("input",{className:"border p-2 w-full mb-3",value:C.name,onChange:e=>D({...C,name:e.target.value})}),r.jsx("label",{className:"block text-sm mb-1",children:"Message"}),r.jsx("textarea",{className:"border p-2 w-full mb-3",value:C.message,onChange:e=>D({...C,message:e.target.value})}),r.jsx("label",{className:"block text-sm mb-1",children:"Rating"}),r.jsx("div",{className:"flex gap-1 mb-3",children:Array.from({length:5}).map((e,t)=>r.jsx("button",{onClick:()=>D({...C,rating:t+1}),className:`text-xl ${t<C.rating?"text-yellow-500":"text-gray-300"}`,children:"★"},t))}),r.jsx("label",{className:"block text-sm mb-1",children:"Status"}),(0,r.jsxs)("select",{value:C.status,onChange:e=>D({...C,status:e.target.value}),className:"border p-2 w-full mb-4",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>D(null),className:"px-4 py-2 border rounded",children:"Cancel"}),r.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})]}):null}},74378:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`C:\Users\mohan\OneDrive\Desktop\ecommerce\src\app\admin\review\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,77,226,986],()=>s(12119));module.exports=r})();