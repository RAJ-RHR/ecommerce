(()=>{var e={};e.id=63,e.ids=[63],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},13753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(44466),r(61193),r(35866);var a=r(23191),s=r(88716),l=r(37922),o=r.n(l),n=r(95231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(t,i);let d=["",{children:["admin",{children:["blog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44466)),"C:\\Users\\mohan\\OneDrive\\Desktop\\ecommerce\\src\\app\\admin\\blog\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,61193)),"C:\\Users\\mohan\\OneDrive\\Desktop\\ecommerce\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mohan\\OneDrive\\Desktop\\ecommerce\\src\\app\\admin\\blog\\page.tsx"],u="/admin/blog/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/blog/page",pathname:"/admin/blog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3161:(e,t,r)=>{Promise.resolve().then(r.bind(r,91895))},91895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(10326),s=r(17577),l=r(46226);let o=function(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(a&&(a+=" "),a+=t);return a};var n=r(35047),i=r(90445);async function d(e){let t=new FormData;t.append("file",e),t.append("upload_preset","herbolife_upload"),t.append("folder","blogs");let r=await fetch("https://api.cloudinary.com/v1_1/deijswbt1/image/upload",{method:"POST",body:t});if(!r.ok)throw Error("Image upload failed");return(await r.json()).secure_url}async function c(e){let t=function(e){let t=e.match(/\/v\d+\/(.+)\.\w+$/);return t?t[1]:null}(e);t&&await fetch("/api/delete-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicId:t})})}var u=r(76);function m(){let[e,t]=(0,s.useState)([]),[r,m]=(0,s.useState)([]),[p,g]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[b,v]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(""),[D,w]=(0,s.useState)(null),[C,S]=(0,s.useState)(""),[P,k]=(0,s.useState)(!1),[q,_]=(0,s.useState)(""),[A,B]=(0,s.useState)([]),[E,U]=(0,s.useState)(""),[O,T]=(0,s.useState)("generate"),[I,J]=(0,s.useState)(""),$=async()=>{B((await (0,u.PL)((0,u.hJ)(i.db,"blogs"))).docs.map(e=>({id:e.id,...e.data()})))},G=e=>e.toLowerCase().trim().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),F=async()=>{if(!D)return C||"";k(!0);try{let e=await d(D);return k(!1),S(e),e}catch(e){return k(!1),U("❌ Failed to upload image"),""}},L=async()=>{if(!y)return U("❌ Blog content is empty");if(!f)return U("❌ Published date is required");let e=await F(),t=I||G(b||p||"Untitled Blog"),r={title:b||p||"Untitled Blog",product:p||null,category:x||null,content:y,coverImage:e,publishedDate:f,updatedAt:(0,u.Bt)(),slug:t};q?(await (0,u.r7)((0,u.JU)(i.db,"blogs",q),r),U("✅ Blog updated!")):(await (0,u.ET)((0,u.hJ)(i.db,"blogs"),{...r,createdAt:(0,u.Bt)()}),U("✅ Blog saved!")),M(),$()},M=()=>{g(""),h(""),v(""),j(""),N(""),w(null),S(""),_(""),J("")},z=e=>{g(e.product||""),h(e.category||""),v(e.title||""),j(e.publishedDate||""),N(e.content||""),S(e.coverImage||""),_(e.id),J(e.slug),T("generate"),U("✏️ Editing blog...")},R=async e=>{confirm("Are you sure you want to delete this blog?")&&(await (0,u.oe)((0,u.JU)(i.db,"blogs",e)),U("\uD83D\uDDD1️ Blog deleted."),$())},H=async()=>{C&&await c(C),w(null),S("")},Q=p?r.filter(t=>{let r=e.find(e=>e.name===p);return r?.category===t}):r,[V,W]=(0,s.useState)(""),[X,K]=(0,s.useState)([]),[Y,Z]=(0,s.useState)([]),ee=async e=>{let t=(0,u.JU)(i.db,"blog_data",e),r=(await (0,u.QT)(t)).data();Z(r?.comments||[])},et=async(e,t)=>{await (0,u.r7)((0,u.JU)(i.db,"blog_data",e),{comments:t}),Z(t)},er=e=>{let t=[...Y];t.splice(e,1),et(V,t)},ea=(e,t)=>{let r=[...Y];r[e].text=t,et(V,r)},es=(0,n.useRouter)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-3 p-4 mt-7 border-b mb-4",children:[a.jsx("button",{onClick:()=>es.push("/admin"),className:"bg-gray-700 text-white px-3 py-2 rounded hover:bg-gray-800",children:"\uD83C\uDFE0 Home"}),a.jsx("button",{onClick:()=>es.push("/admin/orders"),className:"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700",children:"\uD83D\uDCE6 View Orders"}),a.jsx("button",{onClick:()=>{localStorage.removeItem("admin"),es.push("/admin/login")},className:"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700",children:"\uD83D\uDD13 Logout"})]}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[a.jsx("div",{className:"flex mb-6 border-b",children:["generate","view","comments"].map(e=>(0,a.jsxs)("button",{className:o("px-4 py-2 font-medium",O===e?"border-b-4 border-green-600 text-green-700":"text-gray-500 hover:text-black"),onClick:()=>T(e),children:["generate"===e&&"✍️ Blog Generator","view"===e&&"\uD83D\uDCDA See Blogs","comments"===e&&"\uD83D\uDDE8️ Blog Comments"]},e))}),"generate"===O&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("label",{className:"block mb-1 font-medium",children:"Select Product (optional)"}),(0,a.jsxs)("select",{className:"w-full p-2 border rounded mb-4",value:p,onChange:e=>{g(e.target.value),v(e.target.value),h("")},children:[a.jsx("option",{value:"",children:"-- None --"}),e.map(e=>a.jsx("option",{value:e.name,children:e.name},e.id))]}),a.jsx("label",{className:"block mb-1 font-medium",children:"Select Category (optional)"}),(0,a.jsxs)("select",{className:"w-full p-2 border rounded mb-4",value:x,onChange:e=>h(e.target.value),children:[a.jsx("option",{value:"",children:"-- None --"}),Q.map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsx("label",{className:"block mb-1 font-medium",children:"Blog Title"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-4",value:b,onChange:e=>v(e.target.value),placeholder:"Enter blog title"}),a.jsx("label",{className:"block mb-1 font-medium",children:"Published Date"}),a.jsx("input",{type:"date",className:"w-full p-2 border rounded mb-4",value:f,onChange:e=>j(e.target.value)}),(0,a.jsxs)("div",{className:"bg-gray-100 p-3 rounded mb-4 text-sm text-gray-700",children:[a.jsx("strong",{children:"GPT Prompt:"}),a.jsx("div",{className:"mt-1",children:(()=>{let t="Write a high-converting SEO blog for a health and wellness website";if(!p&&!x)return"Please select a product or category to generate blog prompt.";if(!p)return`${t} about the benefits of "${x}" category supplements.`;{let r=e.find(e=>e.name===p);return`${t} about "${p}", which is a ${r?.category} supplement. Description: ${r?.description}`}})()})]}),a.jsx("label",{className:"block mb-1 font-medium",children:"Paste Blog Content"}),a.jsx("textarea",{rows:10,className:"w-full border rounded p-2 mb-4",value:y,onChange:e=>N(e.target.value),placeholder:"Paste your generated blog content here..."}),a.jsx("label",{className:"block mb-1 font-medium",children:"Upload Cover Image"}),a.jsx("input",{type:"file",accept:"image/*",className:"mb-4",onChange:e=>w(e.target.files?.[0]||null)}),P&&a.jsx("p",{className:"text-blue-600 mb-2",children:"Uploading image..."}),C&&(0,a.jsxs)("div",{className:"relative inline-block mb-4",children:[a.jsx(l.default,{src:C,alt:"Cover",width:300,height:200,className:"rounded"}),a.jsx("button",{onClick:H,className:"absolute top-0 right-0 bg-red-600 text-white p-1 rounded-full text-sm hover:bg-red-700",children:"❌"})]}),a.jsx("button",{className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition",onClick:L,children:q?"Update Blog":"Save Blog"}),E&&a.jsx("p",{className:"mt-4 text-green-700",children:E})]}),"view"===O&&a.jsx("div",{className:"space-y-4",children:A.map(e=>(0,a.jsxs)("div",{className:"border p-4 rounded shadow bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-lg",children:e.title}),(0,a.jsxs)("div",{className:"space-x-2",children:[a.jsx("button",{onClick:()=>z(e),className:"text-blue-600",children:"✏️ Edit"}),a.jsx("button",{onClick:()=>R(e.id),className:"text-red-600",children:"\uD83D\uDDD1️ Delete"})]})]}),e.coverImage&&a.jsx(l.default,{src:e.coverImage,alt:"cover",width:300,height:200,className:"rounded my-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCC5 Published: ",e.publishedDate||"N/A"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Product: ",e.product||"N/A"," | Category: ",e.category||"N/A"]}),a.jsx("p",{className:"text-gray-700 line-clamp-3",children:e.content})]},e.id))}),"comments"===O&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("label",{className:"block mb-1 font-medium",children:"Select Blog Slug"}),(0,a.jsxs)("select",{className:"w-full p-2 border rounded mb-4",value:V,onChange:e=>{W(e.target.value),ee(e.target.value)},children:[a.jsx("option",{value:"",children:"-- Select a blog slug --"}),X.map(e=>a.jsx("option",{value:e,children:e},e))]}),Y.length>0?Y.map((e,t)=>(0,a.jsxs)("div",{className:"border p-3 rounded bg-white shadow",children:[(0,a.jsxs)("p",{className:"font-semibold",children:[e.userName," (",e.uid,")",a.jsx("span",{className:"text-sm text-gray-500 ml-2",children:e.createdAt?.seconds?new Date(1e3*e.createdAt.seconds).toLocaleString():"N/A"})]}),a.jsx("textarea",{value:e.text,onChange:e=>ea(t,e.target.value),className:"w-full p-2 border rounded my-2"}),a.jsx("button",{onClick:()=>er(t),className:"text-red-600 text-sm",children:"\uD83D\uDDD1️ Delete"})]},t)):a.jsx("p",{className:"text-gray-600",children:"No comments found for this blog."})]})]})]})}},44466:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\mohan\OneDrive\Desktop\ecommerce\src\app\admin\blog\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,474,226,344],()=>r(13753));module.exports=a})();