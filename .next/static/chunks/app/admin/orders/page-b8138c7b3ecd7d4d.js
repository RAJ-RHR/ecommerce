(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{3821:function(e,t,s){Promise.resolve().then(s.bind(s,7613))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7613:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),r=s(2265),l=s(5978),n=s(6410),d=s(7648),i=s(9376);function o(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(40),[x,p]=(0,r.useState)(1),g=(0,i.useRouter)();(0,r.useEffect)(()=>{if("true"===localStorage.getItem("admin")){let e;o(!0),b();let t=()=>{clearTimeout(e),e=setTimeout(()=>{localStorage.removeItem("admin"),alert("Session expired due to inactivity."),g.push("/admin/login")},3e5)},s=["mousemove","keydown","click","scroll"];return s.forEach(e=>document.addEventListener(e,t)),t(),()=>{clearTimeout(e),s.forEach(e=>document.removeEventListener(e,t))}}g.push("/admin/login")},[]);let b=async()=>{let e=(0,l.IO)((0,l.hJ)(n.db,"orders"),(0,l.Xo)("createdAt","desc"));t((await (0,l.PL)(e)).docs.map(e=>({id:e.id,...e.data()})))},f=async(e,s)=>{try{let a=(0,l.JU)(n.db,"orders",e);await (0,l.r7)(a,{status:s}),t(t=>t.map(t=>t.id===e?{...t,status:s}:t))}catch(e){console.error("Error updating status:",e)}},j=async e=>{if(confirm("Are you sure you want to delete this order?"))try{await (0,l.oe)((0,l.JU)(n.db,"orders",e)),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete order:",e)}};if(!s)return null;let v=e.filter(e=>[e.name,e.email,e.phone].join(" ").toLowerCase().includes(c.toLowerCase())),y=(x-1)*m,N=v.slice(y,y+m),D=Math.ceil(v.length/m);return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83D\uDCE6 Admin Orders Panel"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("admin"),g.push("/admin/login")},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"\uD83D\uDD13 Logout"})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, or phone",value:c,onChange:e=>{u(e.target.value),p(1)},className:"w-full md:w-1/2 border p-2 rounded"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Show:"}),(0,a.jsx)("select",{value:m,onChange:e=>{h(Number(e.target.value)),p(1)},className:"border p-1 rounded",children:[40,100,200].map(e=>(0,a.jsxs)("option",{value:e,children:[e," orders"]},e))})]})]}),0===N.length?(0,a.jsx)("p",{children:"No orders found."}):(0,a.jsx)("div",{className:"space-y-6",children:N.map(e=>{var t,s,r;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-lg",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.phone}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Payment: ",e.paymentMethod]})]}),(0,a.jsxs)("div",{className:"text-right space-y-1",children:[(0,a.jsxs)("p",{className:"text-green-600 font-bold text-lg",children:["₹",e.total]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Saved ₹",null===(t=e.totalSavings)||void 0===t?void 0:t.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:null===(s=e.createdAt)||void 0===s?void 0:s.toDate().toLocaleString()}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status:"}),(0,a.jsx)("select",{value:e.status||"Pending",onChange:t=>f(e.id,t.target.value),className:"border rounded p-1 text-sm",children:["Pending","Shipped","Delivered","Cancelled"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"mt-2 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"\uD83D\uDDD1️ Delete"})]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:["\uD83D\uDCCD Address: ",e.address]}),(0,a.jsxs)("div",{className:"border-t pt-2 mt-2",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDED2 Products:"}),(0,a.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:null===(r=e.cartItems)||void 0===r?void 0:r.map((e,t)=>(0,a.jsxs)("li",{className:"bg-gray-50 p-2 rounded border text-sm",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{children:["₹",e.offer_price," x ",e.quantity," = ₹",e.offer_price*e.quantity]})]},t))})]})]},e.id)})}),D>1&&(0,a.jsxs)("div",{className:"flex justify-center mt-6 gap-4 items-center",children:[(0,a.jsx)("button",{disabled:1===x,onClick:()=>p(e=>e-1),className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"← Prev"}),(0,a.jsxs)("span",{className:"font-medium text-sm",children:["Page ",x," of ",D]}),(0,a.jsx)("button",{disabled:x===D,onClick:()=>p(e=>e+1),className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Next →"})]}),(0,a.jsx)(d.default,{href:"/admin",className:"mt-10 inline-block text-blue-600 hover:underline",children:"← Back to Home"})]})}},6410:function(e,t,s){"use strict";s.d(t,{db:function(){return n}});var a=s(738),r=s(5978);let l=(0,a.ZF)({apiKey:"AIzaSyAI8stgPus8Q8J-w7drj-JddmaKo6Z0hRs",authDomain:"herbolife-store.firebaseapp.com",projectId:"herbolife-store",storageBucket:"herbolife-store.firebasestorage.app",messagingSenderId:"922872122127",appId:"1:922872122127:web:001b4377661261b9cc4c7a"}),n=(0,r.ad)(l)}},function(e){e.O(0,[358,648,448,971,117,744],function(){return e(e.s=3821)}),_N_E=e.O()}]);