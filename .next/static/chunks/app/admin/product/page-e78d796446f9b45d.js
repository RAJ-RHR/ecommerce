(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{6804:function(e,a,t){Promise.resolve().then(t.bind(t,6624))},9376:function(e,a,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},6624:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var r=t(7437),l=t(2265),i=t(5978),s=t(6410),n=t(7648),o=t(9376);let c=e=>e.toLowerCase().replace(/[^؀-ۿ\w\s-]/g,"").trim().replace(/\s+/g,"-"),d=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=(0,i.hJ)(s.db,"products"),r=(await (0,i.PL)(t)).docs.filter(e=>e.id!==a).map(e=>e.data().slug),l=e,n=1;for(;r.includes(l);)l="".concat(e,"-").concat(n),n++;return l},u=async e=>{let a=new FormData;a.append("file",e),a.append("upload_preset","herbolife_upload");let t=await fetch("https://api.cloudinary.com/v1_1/deijswbt1/image/upload",{method:"POST",body:a});return(await t.json()).secure_url};function m(){let e=(0,o.useRouter)(),[a,t]=(0,l.useState)(!1),[m,p]=(0,l.useState)({name:"",price:"",offer_price:"",category:"",label:"",description:"",image:null,availability:"In Stock"}),[h,g]=(0,l.useState)(null),[f,x]=(0,l.useState)([]),[b,y]=(0,l.useState)(null),[v,j]=(0,l.useState)([]),[w,N]=(0,l.useState)(""),[S,C]=(0,l.useState)(1),[P,k]=(0,l.useState)(""),[_,D]=(0,l.useState)(!1),[E,L]=(0,l.useState)(!1),I=["Weight Management","Enhancers","Energy & Fitness","Children's Health","Women's Health","Men's Health","Bone & Joint Health","Digestive Health","Sports Nutritions","Skin & Body Care","Male Enhancement"];(0,l.useEffect)(()=>{if("true"===localStorage.getItem("admin")){let a;t(!0),O(),J();let r=()=>{clearTimeout(a),a=setTimeout(()=>{localStorage.removeItem("admin"),alert("Session expired due to inactivity."),e.push("/admin/login")},3e5)},l=["mousemove","keydown","click","scroll"];return l.forEach(e=>document.addEventListener(e,r)),r(),()=>{clearTimeout(a),l.forEach(e=>document.removeEventListener(e,r))}}e.push("/admin/login")},[e]);let O=async()=>{x((await (0,i.PL)((0,i.hJ)(s.db,"products"))).docs.map(e=>({id:e.id,...e.data()})))},J=async()=>{j((await (0,i.PL)((0,i.hJ)(s.db,"reviews"))).docs.map(e=>({id:e.id,...e.data()})))},A=e=>{let{name:a,value:t,files:r}=e.target;r&&r[0]?(p({...m,image:r[0]}),g(URL.createObjectURL(r[0]))):p({...m,[a]:t})},U=async e=>{e.preventDefault(),D(!0);let a=m.image?await u(m.image):null,t=await d(c(m.name),b),r={name:m.name,price:m.price,offer_price:m.offer_price,category:m.category,label:m.label,description:m.description,availability:m.availability,slug:t,...a&&{image:a}};b?await (0,i.r7)((0,i.JU)(s.db,"products",b),r):await (0,i.ET)((0,i.hJ)(s.db,"products"),{...r,image:a,createdAt:(0,i.Bt)()}),p({name:"",price:"",offer_price:"",category:"",label:"",description:"",image:null,availability:"In Stock"}),g(null),y(null),D(!1),L(!0),O(),setTimeout(()=>L(!1),3e3)},H=e=>{p({name:e.name,price:e.price,offer_price:e.offer_price,category:e.category||"",label:e.label||"",description:e.description||"",image:null,availability:e.availability||"In Stock"}),g(e.image),y(e.id)},R=async e=>{confirm("Delete product?")&&(await (0,i.oe)((0,i.JU)(s.db,"products",e)),O())},M=f.filter(e=>{let a=!w||e.category===w,t=e.name.toLowerCase().includes(P.toLowerCase());return a&&t}),T=M.slice((S-1)*6,6*S),q=Math.ceil(M.length/6);return a?(0,r.jsx)("div",{className:"mt-24",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:b?"✏️ Edit Product":"➕ Add Product"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(n.default,{href:"/admin",className:"bg-gray-700 text-white px-2 py-2 rounded hover:bg-gray-800",children:"\uD83C\uDFE0 Home"}),(0,r.jsx)(n.default,{href:"/admin/orders",className:"bg-blue-600 text-white px-2 py-2 rounded hover:bg-blue-700",children:"\uD83D\uDCE6 View Orders"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("admin"),e.push("/admin/login")},className:"bg-red-600 text-white px-2 py-2 rounded hover:bg-red-700",children:"\uD83D\uDD13 Logout"})]})]}),E&&(0,r.jsxs)("div",{className:"bg-green-100 text-green-700 p-3 mb-4 rounded shadow",children:["✅ Product ",b?"updated":"added"," successfully!"]}),(0,r.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",name:"name",value:m.name,onChange:A,placeholder:"Product Name",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"text",name:"price",value:m.price,onChange:A,placeholder:"Price",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"text",name:"offer_price",value:m.offer_price,onChange:A,placeholder:"Offer Price",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsxs)("select",{name:"category",value:m.category,onChange:A,required:!0,className:"border w-full p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),I.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{name:"label",value:m.label,onChange:A,className:"border w-full p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Label"}),["Hot Deal","Sale","Limited Offer"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{name:"availability",value:m.availability,onChange:A,className:"border w-full p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Availability"}),(0,r.jsx)("option",{value:"In Stock",children:"In Stock"}),(0,r.jsx)("option",{value:"Out of Stock",children:"Out of Stock"}),(0,r.jsx)("option",{value:"Limited Stock",children:"Limited Stock"})]}),(0,r.jsx)("textarea",{name:"description",value:m.description,onChange:A,placeholder:"Description",rows:3,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:A,className:"border w-full p-2 rounded",...b?{}:{required:!0}}),h&&(0,r.jsx)("img",{src:h,className:"w-full h-60 object-contain bg-white border rounded"}),(0,r.jsx)("button",{type:"submit",className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:_?b?"Updating...":"Uploading...":b?"Update Product":"Upload Product"})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mt-10 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by product name...",value:P,onChange:e=>k(e.target.value),className:"border p-2 rounded w-full md:max-w-sm"}),(0,r.jsxs)("select",{value:w,onChange:e=>N(e.target.value),className:"border p-2 rounded w-full md:w-auto",children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),I.map(e=>(0,r.jsx)("option",{children:e},e))]})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>C(e=>Math.max(e-1,1)),disabled:1===S,className:"bg-gray-200 px-3 py-1 rounded",children:"Prev"}),(0,r.jsxs)("span",{children:["Page ",S," of ",q]}),(0,r.jsx)("button",{onClick:()=>C(e=>Math.min(e+1,q)),disabled:S===q,className:"bg-gray-200 px-3 py-1 rounded",children:"Next"})]}),(0,r.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(e=>(0,r.jsxs)("div",{className:"border rounded p-4 flex flex-col",children:[(0,r.jsx)("img",{src:e.image,alt:e.name,className:"h-40 object-contain bg-white rounded mb-2"}),(0,r.jsx)("h4",{className:"font-bold",children:e.name}),(0,r.jsxs)("p",{children:["Category: ",e.category]}),(0,r.jsxs)("p",{children:["Price: ₹",e.price]}),(0,r.jsxs)("p",{children:["Offer: ₹",e.offer_price]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Availability: ",e.availability||"N/A"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Label: ",e.label||"None"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Desc: ",e.description||"No description"]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsx)("button",{onClick:()=>H(e),className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>R(e.id),className:"bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]},e.id))})]})}):null}},6410:function(e,a,t){"use strict";t.d(a,{db:function(){return s}});var r=t(738),l=t(5978);let i=(0,r.ZF)({apiKey:"AIzaSyAI8stgPus8Q8J-w7drj-JddmaKo6Z0hRs",authDomain:"herbolife-store.firebaseapp.com",projectId:"herbolife-store",storageBucket:"herbolife-store.firebasestorage.app",messagingSenderId:"922872122127",appId:"1:922872122127:web:001b4377661261b9cc4c7a"}),s=(0,l.ad)(i)}},function(e){e.O(0,[358,448,648,971,117,744],function(){return e(e.s=6804)}),_N_E=e.O()}]);