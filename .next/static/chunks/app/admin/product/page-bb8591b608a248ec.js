(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{5007:function(e,a,t){Promise.resolve().then(t.bind(t,6624))},9376:function(e,a,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},6624:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var r=t(7437),s=t(2265),l=t(5978),n=t(6410),i=t(7648),o=t(9376);function d(){let e=(0,o.useRouter)(),[a,t]=(0,s.useState)(!1),[d,c]=(0,s.useState)({name:"",price:"",offer_price:"",category:"",label:"",description:"",image:null}),[u,m]=(0,s.useState)(null),[p,h]=(0,s.useState)([]),[g,f]=(0,s.useState)(null),[x,b]=(0,s.useState)(""),[j,y]=(0,s.useState)(1),[v,w]=(0,s.useState)(""),[N,S]=(0,s.useState)(!1),[C,P]=(0,s.useState)(!1),_=["Weight Management","Enhancers","Energy & Fitness","Children's Health","Women's Health","Men's Health","Bone & Joint Health","Digestive Health","Sports Nutritions","Skin & Body Care","Male Enhancement"];(0,s.useEffect)(()=>{if("true"===localStorage.getItem("admin")){let a;t(!0),D();let r=()=>{clearTimeout(a),a=setTimeout(()=>{localStorage.removeItem("admin"),alert("Session expired due to inactivity."),e.push("/admin/login")},3e5)},s=["mousemove","keydown","click","scroll"];return s.forEach(e=>document.addEventListener(e,r)),r(),()=>{clearTimeout(a),s.forEach(e=>document.removeEventListener(e,r))}}e.push("/admin/login")},[]);let D=async()=>{h((await (0,l.PL)((0,l.hJ)(n.db,"products"))).docs.map(e=>({id:e.id,...e.data()})))},E=e=>{let{name:a,value:t,files:r}=e.target;r&&r[0]?(c({...d,image:r[0]}),m(URL.createObjectURL(r[0]))):c({...d,[a]:t})},k=async e=>{let a=new FormData;a.append("file",e),a.append("upload_preset","herbolife_upload");let t=await fetch("https://api.cloudinary.com/v1_1/deijswbt1/image/upload",{method:"POST",body:a});return(await t.json()).secure_url},L=async e=>{e.preventDefault(),S(!0);let a=null;if(d.image&&!(a=await k(d.image))){alert("❌ Image upload failed"),S(!1);return}let t={name:d.name,price:d.price,offer_price:d.offer_price,category:d.category,label:d.label,description:d.description,...a&&{image:a}};if(g){let e=(0,l.JU)(n.db,"products",g);await (0,l.r7)(e,t)}else await (0,l.ET)((0,l.hJ)(n.db,"products"),{...t,image:a,createdAt:(0,l.Bt)()});c({name:"",price:"",offer_price:"",category:"",label:"",description:"",image:null}),m(null),f(null),S(!1),P(!0),D(),setTimeout(()=>P(!1),3e3)},I=e=>{c({name:e.name,price:e.price,offer_price:e.offer_price,category:e.category||"",label:e.label||"",description:e.description||"",image:null}),m(e.image),f(e.id)},O=async e=>{confirm("Are you sure to delete?")&&(await (0,l.oe)((0,l.JU)(n.db,"products",e)),D())},U=p.filter(e=>{let a=!x||e.category===x,t=e.name.toLowerCase().includes(v.toLowerCase());return a&&t}),J=Math.ceil(U.length/6),R=U.slice((j-1)*6,6*j);return a?(0,r.jsx)("div",{className:"mt-24",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:g?"✏️ Edit Product":"➕ Add Product"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(i.default,{href:"/admin/orders",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"\uD83D\uDCE6 View Orders"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("admin"),e.push("/admin/login")},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"\uD83D\uDD13 Logout"})]})]}),C&&(0,r.jsxs)("div",{className:"bg-green-100 text-green-700 p-3 mb-4 rounded shadow",children:["✅ Product ",g?"updated":"added"," successfully!"]}),(0,r.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",name:"name",value:d.name,onChange:E,placeholder:"Product Name",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"text",name:"price",value:d.price,onChange:E,placeholder:"Price",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"text",name:"offer_price",value:d.offer_price,onChange:E,placeholder:"Offer Price",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsxs)("select",{name:"category",value:d.category,onChange:E,required:!0,className:"border w-full p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),_.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{name:"label",value:d.label,onChange:E,className:"border w-full p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Label"}),["Hot Deal","Sale","Limited Offer"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("textarea",{name:"description",value:d.description,onChange:E,placeholder:"Description",rows:3,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:E,className:"border w-full p-2 rounded",...g?{}:{required:!0}}),u&&(0,r.jsx)("img",{src:u,className:"w-full h-60 object-contain bg-white border rounded"}),(0,r.jsx)("button",{type:"submit",className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:N?g?"Updating...":"Uploading...":g?"Update Product":"Upload Product"})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mt-10 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by product name...",value:v,onChange:e=>w(e.target.value),className:"border p-2 rounded w-full md:max-w-sm"}),(0,r.jsxs)("select",{value:x,onChange:e=>b(e.target.value),className:"border p-2 rounded w-full md:w-auto",children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),_.map(e=>(0,r.jsx)("option",{children:e},e))]})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>y(e=>Math.max(e-1,1)),disabled:1===j,className:"bg-gray-200 px-3 py-1 rounded",children:"Prev"}),(0,r.jsxs)("span",{children:["Page ",j," of ",J]}),(0,r.jsx)("button",{onClick:()=>y(e=>Math.min(e+1,J)),disabled:j===J,className:"bg-gray-200 px-3 py-1 rounded",children:"Next"})]}),(0,r.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(e=>(0,r.jsxs)("div",{className:"border rounded p-4 flex flex-col",children:[(0,r.jsx)("img",{src:e.image,alt:e.name,className:"h-40 object-contain bg-white rounded mb-2"}),(0,r.jsx)("h4",{className:"font-bold",children:e.name}),(0,r.jsxs)("p",{children:["Category: ",e.category]}),(0,r.jsxs)("p",{children:["Price: ₹",e.price]}),(0,r.jsxs)("p",{children:["Offer: ₹",e.offer_price]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Label: ",e.label||"None"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Desc: ",e.description||"No description"]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsx)("button",{onClick:()=>I(e),className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>O(e.id),className:"bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]},e.id))})]})}):null}},6410:function(e,a,t){"use strict";t.d(a,{db:function(){return n}});var r=t(738),s=t(5978);let l=(0,r.ZF)({apiKey:"AIzaSyAI8stgPus8Q8J-w7drj-JddmaKo6Z0hRs",authDomain:"herbolife-store.firebaseapp.com",projectId:"herbolife-store",storageBucket:"herbolife-store.firebasestorage.app",messagingSenderId:"922872122127",appId:"1:922872122127:web:001b4377661261b9cc4c7a"}),n=(0,s.ad)(l)}},function(e){e.O(0,[358,648,448,971,117,744],function(){return e(e.s=5007)}),_N_E=e.O()}]);