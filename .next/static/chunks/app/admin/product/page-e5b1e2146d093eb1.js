(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{1720:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>o});var t=r(5155),l=r(2115),s=r(6104),d=r(5317),i=r(6874),c=r.n(i);function o(){let[e,a]=(0,l.useState)({name:"",price:"",offer_price:"",category:"",image:null}),[r,i]=(0,l.useState)(null),[o,n]=(0,l.useState)([]),[p,u]=(0,l.useState)(null),[m,g]=(0,l.useState)(""),[h,f]=(0,l.useState)(1);(0,l.useEffect)(()=>{x()},[]);let x=async()=>{n((await (0,d.GG)((0,d.rJ)(s.db,"products"))).docs.map(e=>({id:e.id,...e.data()})))},b=r=>{let{name:t,value:l,files:s}=r.target;s&&s[0]?(a({...e,image:s[0]}),i(URL.createObjectURL(s[0]))):a({...e,[t]:l})},y=async e=>{let a=new FormData;a.append("file",e),a.append("upload_preset","herbolife_upload");let r=await fetch("https://api.cloudinary.com/v1_1/deijswbt1/image/upload",{method:"POST",body:a});return(await r.json()).secure_url},j=async r=>{r.preventDefault();let t=null;if(e.image&&!(t=await y(e.image)))return alert("❌ Image upload failed");let l={name:e.name,price:e.price,offer_price:e.offer_price,category:e.category,...t&&{image:t}};if(p){let e=(0,d.H9)(s.db,"products",p);await (0,d.mZ)(e,l),alert("✅ Product updated!")}else await (0,d.gS)((0,d.rJ)(s.db,"products"),{...l,image:t,createdAt:(0,d.O5)()}),alert("✅ Product added!");a({name:"",price:"",offer_price:"",category:"",image:null}),i(null),u(null),x()},w=e=>{a({name:e.name,price:e.price,offer_price:e.offer_price,category:e.category||"",image:null}),i(e.image),u(e.id)},N=async e=>{confirm("Are you sure to delete?")&&(await (0,d.kd)((0,d.H9)(s.db,"products",e)),x())},v=[...new Set(o.map(e=>e.category))],_=m?o.filter(e=>e.category===m):o,P=Math.ceil(_.length/6),C=_.slice((h-1)*6,6*h);return(0,t.jsxs)("div",{className:"max-w-5xl mx-auto p-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:p?"✏️ Edit Product":"➕ Add Product"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",name:"name",value:e.name,onChange:b,placeholder:"Product Name",className:"border w-full p-2 rounded",required:!0}),(0,t.jsx)("input",{type:"text",name:"price",value:e.price,onChange:b,placeholder:"Price",className:"border w-full p-2 rounded",required:!0}),(0,t.jsx)("input",{type:"text",name:"offer_price",value:e.offer_price,onChange:b,placeholder:"Offer Price",className:"border w-full p-2 rounded",required:!0}),(0,t.jsx)("input",{type:"text",name:"category",value:e.category,onChange:b,placeholder:"Category (e.g. Protein)",className:"border w-full p-2 rounded",required:!0}),(0,t.jsx)("input",{type:"file",name:"image",onChange:b,accept:"image/*",className:"border w-full p-2 rounded",...p?{}:{required:!0}}),r&&(0,t.jsx)("img",{src:r,alt:"Preview",className:"w-full h-60 object-contain bg-white rounded"}),(0,t.jsx)("button",{type:"submit",className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:p?"Update Product":"Upload Product"})]}),(0,t.jsxs)("div",{className:"mt-10 flex justify-between items-center",children:[(0,t.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"border p-2 rounded",children:[(0,t.jsx)("option",{value:"",children:"All Categories"}),v.map(e=>(0,t.jsx)("option",{children:e},e))]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>f(e=>Math.max(e-1,1)),disabled:1===h,className:"bg-gray-200 px-3 py-1 rounded",children:"Prev"}),(0,t.jsxs)("span",{children:["Page ",h," of ",P]}),(0,t.jsx)("button",{onClick:()=>f(e=>Math.min(e+1,P)),disabled:h===P,className:"bg-gray-200 px-3 py-1 rounded",children:"Next"})]})]}),(0,t.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(e=>(0,t.jsxs)("div",{className:"border rounded p-4 flex flex-col",children:[(0,t.jsx)("img",{src:e.image,alt:e.name,className:"h-40 object-contain bg-white rounded mb-2"}),(0,t.jsx)("h4",{className:"font-bold",children:e.name}),(0,t.jsxs)("p",{children:["Category: ",e.category]}),(0,t.jsxs)("p",{children:["Price: ₹",e.price]}),(0,t.jsxs)("p",{children:["Offer: ₹",e.offer_price]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)(c(),{href:"/products/".concat(e.id),children:(0,t.jsx)("span",{className:"bg-blue-600 text-white px-3 py-1 rounded cursor-pointer",children:"View"})}),(0,t.jsx)("button",{onClick:()=>w(e),className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>N(e.id),className:"bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]},e.id))})]})}},6104:(e,a,r)=>{"use strict";r.d(a,{db:()=>d});var t=r(3915),l=r(5317);let s=(0,t.Wp)({apiKey:"AIzaSyAI8stgPus8Q8J-w7drj-JddmaKo6Z0hRs",authDomain:"herbolife-store.firebaseapp.com",projectId:"herbolife-store",storageBucket:"herbolife-store.firebasestorage.app",messagingSenderId:"922872122127",appId:"1:922872122127:web:001b4377661261b9cc4c7a"}),d=(0,l.aU)(s)},6561:(e,a,r)=>{Promise.resolve().then(r.bind(r,1720))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,874,399,441,684,358],()=>a(6561)),_N_E=e.O()}]);