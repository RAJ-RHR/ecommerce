(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{6804:function(e,a,t){Promise.resolve().then(t.bind(t,6624))},9376:function(e,a,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},6624:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return u}});var r=t(7437),s=t(2265),l=t(5978),n=t(6410),i=t(7648),o=t(9376);let d=e=>e.toLowerCase().replace(/[^؀-ۿ\w\s-]/g,"").trim().replace(/\s+/g,"-"),c=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=(0,l.hJ)(n.db,"products"),r=(await (0,l.PL)(t)).docs.filter(e=>e.id!==a).map(e=>e.data().slug),s=e,i=1;for(;r.includes(s);)s="".concat(e,"-").concat(i),i++;return s};function u(){let e=(0,o.useRouter)(),[a,t]=(0,s.useState)(!1),[u,m]=(0,s.useState)({name:"",price:"",offer_price:"",category:"",label:"",description:"",image:null}),[p,h]=(0,s.useState)(null),[g,f]=(0,s.useState)([]),[x,b]=(0,s.useState)(null),[j,y]=(0,s.useState)(""),[w,v]=(0,s.useState)(1),[N,S]=(0,s.useState)(""),[C,P]=(0,s.useState)(!1),[_,D]=(0,s.useState)(!1),E=["Weight Management","Enhancers","Energy & Fitness","Children's Health","Women's Health","Men's Health","Bone & Joint Health","Digestive Health","Sports Nutritions","Skin & Body Care","Male Enhancement"];(0,s.useEffect)(()=>{if("true"===localStorage.getItem("admin")){let a;t(!0),k();let r=()=>{clearTimeout(a),a=setTimeout(()=>{localStorage.removeItem("admin"),alert("Session expired due to inactivity."),e.push("/admin/login")},3e5)},s=["mousemove","keydown","click","scroll"];return s.forEach(e=>document.addEventListener(e,r)),r(),()=>{clearTimeout(a),s.forEach(e=>document.removeEventListener(e,r))}}e.push("/admin/login")},[e]);let k=async()=>{f((await (0,l.PL)((0,l.hJ)(n.db,"products"))).docs.map(e=>({id:e.id,...e.data()})))},L=e=>{let{name:a,value:t,files:r}=e.target;r&&r[0]?(m({...u,image:r[0]}),h(URL.createObjectURL(r[0]))):m({...u,[a]:t})},I=async e=>{let a=new FormData;a.append("file",e),a.append("upload_preset","herbolife_upload");let t=await fetch("https://api.cloudinary.com/v1_1/deijswbt1/image/upload",{method:"POST",body:a});return(await t.json()).secure_url},J=async e=>{e.preventDefault(),P(!0);let a=null;if(u.image&&!(a=await I(u.image))){alert("❌ Image upload failed"),P(!1);return}let t=d(u.name),r=await c(t,x),s={name:u.name,price:u.price,offer_price:u.offer_price,category:u.category,label:u.label,description:u.description,slug:r,...a&&{image:a}};if(x){let e=(0,l.JU)(n.db,"products",x);await (0,l.r7)(e,s)}else await (0,l.ET)((0,l.hJ)(n.db,"products"),{...s,image:a,createdAt:(0,l.Bt)()});m({name:"",price:"",offer_price:"",category:"",label:"",description:"",image:null}),h(null),b(null),P(!1),D(!0),k(),setTimeout(()=>D(!1),3e3)},O=e=>{m({name:e.name,price:e.price,offer_price:e.offer_price,category:e.category||"",label:e.label||"",description:e.description||"",image:null}),h(e.image),b(e.id)},U=async e=>{confirm("Are you sure to delete?")&&(await (0,l.oe)((0,l.JU)(n.db,"products",e)),k())},H=g.filter(e=>{let a=!j||e.category===j,t=e.name.toLowerCase().includes(N.toLowerCase());return a&&t}),R=Math.ceil(H.length/6),A=H.slice((w-1)*6,6*w);return a?(0,r.jsx)("div",{className:"mt-24",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:x?"✏️ Edit Product":"➕ Add Product"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(i.default,{href:"/admin",className:"bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800",children:"\uD83C\uDFE0 Home"}),(0,r.jsx)(i.default,{href:"/admin/orders",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"\uD83D\uDCE6 View Orders"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("admin"),e.push("/admin/login")},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"\uD83D\uDD13 Logout"})]})]}),_&&(0,r.jsxs)("div",{className:"bg-green-100 text-green-700 p-3 mb-4 rounded shadow",children:["✅ Product ",x?"updated":"added"," successfully!"]}),(0,r.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",name:"name",value:u.name,onChange:L,placeholder:"Product Name",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"text",name:"price",value:u.price,onChange:L,placeholder:"Price",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"text",name:"offer_price",value:u.offer_price,onChange:L,placeholder:"Offer Price",required:!0,className:"border w-full p-2 rounded"}),(0,r.jsxs)("select",{name:"category",value:u.category,onChange:L,required:!0,className:"border w-full p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),E.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{name:"label",value:u.label,onChange:L,className:"border w-full p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Label"}),["Hot Deal","Sale","Limited Offer"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("textarea",{name:"description",value:u.description,onChange:L,placeholder:"Description",rows:3,className:"border w-full p-2 rounded"}),(0,r.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:L,className:"border w-full p-2 rounded",...x?{}:{required:!0}}),p&&(0,r.jsx)("img",{src:p,className:"w-full h-60 object-contain bg-white border rounded"}),(0,r.jsx)("button",{type:"submit",className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:C?x?"Updating...":"Uploading...":x?"Update Product":"Upload Product"})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mt-10 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by product name...",value:N,onChange:e=>S(e.target.value),className:"border p-2 rounded w-full md:max-w-sm"}),(0,r.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"border p-2 rounded w-full md:w-auto",children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),E.map(e=>(0,r.jsx)("option",{children:e},e))]})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===w,className:"bg-gray-200 px-3 py-1 rounded",children:"Prev"}),(0,r.jsxs)("span",{children:["Page ",w," of ",R]}),(0,r.jsx)("button",{onClick:()=>v(e=>Math.min(e+1,R)),disabled:w===R,className:"bg-gray-200 px-3 py-1 rounded",children:"Next"})]}),(0,r.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(e=>(0,r.jsxs)("div",{className:"border rounded p-4 flex flex-col",children:[(0,r.jsx)("img",{src:e.image,alt:e.name,className:"h-40 object-contain bg-white rounded mb-2"}),(0,r.jsx)("h4",{className:"font-bold",children:e.name}),(0,r.jsxs)("p",{children:["Category: ",e.category]}),(0,r.jsxs)("p",{children:["Price: ₹",e.price]}),(0,r.jsxs)("p",{children:["Offer: ₹",e.offer_price]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Label: ",e.label||"None"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Desc: ",e.description||"No description"]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsx)("button",{onClick:()=>O(e),className:"bg-yellow-500 text-white px-3 py-1 rounded",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>U(e.id),className:"bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]},e.id))})]})}):null}},6410:function(e,a,t){"use strict";t.d(a,{db:function(){return n}});var r=t(738),s=t(5978);let l=(0,r.ZF)({apiKey:"AIzaSyAI8stgPus8Q8J-w7drj-JddmaKo6Z0hRs",authDomain:"herbolife-store.firebaseapp.com",projectId:"herbolife-store",storageBucket:"herbolife-store.firebasestorage.app",messagingSenderId:"922872122127",appId:"1:922872122127:web:001b4377661261b9cc4c7a"}),n=(0,s.ad)(l)}},function(e){e.O(0,[358,648,448,971,117,744],function(){return e(e.s=6804)}),_N_E=e.O()}]);