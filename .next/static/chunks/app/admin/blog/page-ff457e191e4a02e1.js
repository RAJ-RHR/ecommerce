(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{3403:function(e,t,a){Promise.resolve().then(a.bind(a,2831))},9376:function(e,t,a){"use strict";var l=a(5475);a.o(l,"useParams")&&a.d(t,{useParams:function(){return l.useParams}}),a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},5523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return l}});let l=a(7043)._(a(2265)).default.createContext(null)},2831:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var l=a(7437),s=a(2265),r=a(3145),n=function(){for(var e,t,a=0,l="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=function e(t){var a,l,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(a=0;a<r;a++)t[a]&&(l=e(t[a]))&&(s&&(s+=" "),s+=l)}else for(l in t)t[l]&&(s&&(s+=" "),s+=l)}return s}(e))&&(l&&(l+=" "),l+=t);return l},o=a(9376),i=a(6410);async function c(e){let t=new FormData;t.append("file",e),t.append("upload_preset","herbolife_upload"),t.append("folder","blogs");let a=await fetch("https://api.cloudinary.com/v1_1/deijswbt1/image/upload",{method:"POST",body:t});if(!a.ok)throw Error("Image upload failed");return(await a.json()).secure_url}async function d(e){let t=function(e){let t=e.match(/\/v\d+\/(.+)\.\w+$/);return t?t[1]:null}(e);t&&await fetch("/api/delete-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicId:t})})}var u=a(5978);function m(){let[e,t]=(0,s.useState)([]),[a,m]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[x,f]=(0,s.useState)(""),[v,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(""),[w,D]=(0,s.useState)(null),[S,C]=(0,s.useState)(""),[P,k]=(0,s.useState)(!1),[B,_]=(0,s.useState)(""),[A,E]=(0,s.useState)([]),[I,J]=(0,s.useState)(""),[O,U]=(0,s.useState)("generate");(0,s.useEffect)(()=>{(async()=>{let e=(await (0,u.PL)((0,u.hJ)(i.db,"products"))).docs.map(e=>({id:e.id,...e.data()}));t(e),m([...new Set(e.map(e=>e.category))]),L()})()},[]);let[T,F]=(0,s.useState)(""),L=async()=>{E((await (0,u.PL)((0,u.hJ)(i.db,"blogs"))).docs.map(e=>({id:e.id,...e.data()})))},R=e=>e.toLowerCase().trim().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),z=async()=>{if(!w)return S||"";k(!0);try{let e=await c(w);return k(!1),C(e),e}catch(e){return k(!1),J("❌ Failed to upload image"),""}},G=async()=>{if(!y)return J("❌ Blog content is empty");if(!v)return J("❌ Published date is required");let e=await z(),t=T||R(x||g||"Untitled Blog"),a={title:x||g||"Untitled Blog",product:g||null,category:h||null,content:y,coverImage:e,publishedDate:v,updatedAt:(0,u.Bt)(),slug:t};B?(await (0,u.r7)((0,u.JU)(i.db,"blogs",B),a),J("✅ Blog updated!")):(await (0,u.ET)((0,u.hJ)(i.db,"blogs"),{...a,createdAt:(0,u.Bt)()}),J("✅ Blog saved!")),K(),L()},K=()=>{b(""),p(""),f(""),j(""),N(""),D(null),C(""),_(""),F("")},Q=e=>{b(e.product||""),p(e.category||""),f(e.title||""),j(e.publishedDate||""),N(e.content||""),C(e.coverImage||""),_(e.id),F(e.slug),U("generate"),J("✏️ Editing blog...")},Z=async e=>{confirm("Are you sure you want to delete this blog?")&&(await (0,u.oe)((0,u.JU)(i.db,"blogs",e)),J("\uD83D\uDDD1️ Blog deleted."),L())},q=async()=>{S&&await d(S),D(null),C("")},H=g?a.filter(t=>{let a=e.find(e=>e.name===g);return(null==a?void 0:a.category)===t}):a,[M,V]=(0,s.useState)(""),[W,$]=(0,s.useState)([]),[X,Y]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{$((await (0,u.PL)((0,u.hJ)(i.db,"blog_data"))).docs.map(e=>e.id))})()},[]);let ee=async e=>{let t=(0,u.JU)(i.db,"blog_data",e),a=(await (0,u.QT)(t)).data();Y((null==a?void 0:a.comments)||[])},et=async(e,t)=>{await (0,u.r7)((0,u.JU)(i.db,"blog_data",e),{comments:t}),Y(t)},ea=e=>{let t=[...X];t.splice(e,1),et(M,t)},el=(e,t)=>{let a=[...X];a[e].text=t,et(M,a)},es=(0,o.useRouter)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex gap-3 p-4 mt-7 border-b mb-4",children:[(0,l.jsx)("button",{onClick:()=>es.push("/admin"),className:"bg-gray-700 text-white px-3 py-2 rounded hover:bg-gray-800",children:"\uD83C\uDFE0 Home"}),(0,l.jsx)("button",{onClick:()=>es.push("/admin/orders"),className:"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700",children:"\uD83D\uDCE6 View Orders"}),(0,l.jsx)("button",{onClick:()=>{localStorage.removeItem("admin"),es.push("/admin/login")},className:"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700",children:"\uD83D\uDD13 Logout"})]}),(0,l.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[(0,l.jsx)("div",{className:"flex mb-6 border-b",children:["generate","view","comments"].map(e=>(0,l.jsxs)("button",{className:n("px-4 py-2 font-medium",O===e?"border-b-4 border-green-600 text-green-700":"text-gray-500 hover:text-black"),onClick:()=>U(e),children:["generate"===e&&"✍️ Blog Generator","view"===e&&"\uD83D\uDCDA See Blogs","comments"===e&&"\uD83D\uDDE8️ Blog Comments"]},e))}),"generate"===O&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Select Product (optional)"}),(0,l.jsxs)("select",{className:"w-full p-2 border rounded mb-4",value:g,onChange:e=>{b(e.target.value),f(e.target.value),p("")},children:[(0,l.jsx)("option",{value:"",children:"-- None --"}),e.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Select Category (optional)"}),(0,l.jsxs)("select",{className:"w-full p-2 border rounded mb-4",value:h,onChange:e=>p(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"-- None --"}),H.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Blog Title"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border rounded mb-4",value:x,onChange:e=>f(e.target.value),placeholder:"Enter blog title"}),(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Published Date"}),(0,l.jsx)("input",{type:"date",className:"w-full p-2 border rounded mb-4",value:v,onChange:e=>j(e.target.value)}),(0,l.jsxs)("div",{className:"bg-gray-100 p-3 rounded mb-4 text-sm text-gray-700",children:[(0,l.jsx)("strong",{children:"GPT Prompt:"}),(0,l.jsx)("div",{className:"mt-1",children:(()=>{let t="Write a high-converting SEO blog for a health and wellness website";if(!g&&!h)return"Please select a product or category to generate blog prompt.";if(!g)return"".concat(t,' about the benefits of "').concat(h,'" category supplements.');{let a=e.find(e=>e.name===g);return"".concat(t,' about "').concat(g,'", which is a ').concat(null==a?void 0:a.category," supplement. Description: ").concat(null==a?void 0:a.description)}})()})]}),(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Paste Blog Content"}),(0,l.jsx)("textarea",{rows:10,className:"w-full border rounded p-2 mb-4",value:y,onChange:e=>N(e.target.value),placeholder:"Paste your generated blog content here..."}),(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Upload Cover Image"}),(0,l.jsx)("input",{type:"file",accept:"image/*",className:"mb-4",onChange:e=>{var t;return D((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),P&&(0,l.jsx)("p",{className:"text-blue-600 mb-2",children:"Uploading image..."}),S&&(0,l.jsxs)("div",{className:"relative inline-block mb-4",children:[(0,l.jsx)(r.default,{src:S,alt:"Cover",width:300,height:200,className:"rounded"}),(0,l.jsx)("button",{onClick:q,className:"absolute top-0 right-0 bg-red-600 text-white p-1 rounded-full text-sm hover:bg-red-700",children:"❌"})]}),(0,l.jsx)("button",{className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition",onClick:G,children:B?"Update Blog":"Save Blog"}),I&&(0,l.jsx)("p",{className:"mt-4 text-green-700",children:I})]}),"view"===O&&(0,l.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,l.jsxs)("div",{className:"border p-4 rounded shadow bg-white",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsx)("button",{onClick:()=>Q(e),className:"text-blue-600",children:"✏️ Edit"}),(0,l.jsx)("button",{onClick:()=>Z(e.id),className:"text-red-600",children:"\uD83D\uDDD1️ Delete"})]})]}),e.coverImage&&(0,l.jsx)(r.default,{src:e.coverImage,alt:"cover",width:300,height:200,className:"rounded my-2"}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCC5 Published: ",e.publishedDate||"N/A"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Product: ",e.product||"N/A"," | Category: ",e.category||"N/A"]}),(0,l.jsx)("p",{className:"text-gray-700 line-clamp-3",children:e.content})]},e.id))}),"comments"===O&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Select Blog Slug"}),(0,l.jsxs)("select",{className:"w-full p-2 border rounded mb-4",value:M,onChange:e=>{V(e.target.value),ee(e.target.value)},children:[(0,l.jsx)("option",{value:"",children:"-- Select a blog slug --"}),W.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),X.length>0?X.map((e,t)=>{var a;return(0,l.jsxs)("div",{className:"border p-3 rounded bg-white shadow",children:[(0,l.jsxs)("p",{className:"font-semibold",children:[e.userName," (",e.uid,")",(0,l.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:(null===(a=e.createdAt)||void 0===a?void 0:a.seconds)?new Date(1e3*e.createdAt.seconds).toLocaleString():"N/A"})]}),(0,l.jsx)("textarea",{value:e.text,onChange:e=>el(t,e.target.value),className:"w-full p-2 border rounded my-2"}),(0,l.jsx)("button",{onClick:()=>ea(t),className:"text-red-600 text-sm",children:"\uD83D\uDDD1️ Delete"})]},t)}):(0,l.jsx)("p",{className:"text-gray-600",children:"No comments found for this blog."})]})]})]})}},6410:function(e,t,a){"use strict";a.d(t,{I:function(){return i},db:function(){return o}});var l=a(738),s=a(5978),r=a(3301);let n=(0,l.ZF)({apiKey:"AIzaSyAI8stgPus8Q8J-w7drj-JddmaKo6Z0hRs",authDomain:"herbolife-store.firebaseapp.com",projectId:"herbolife-store",storageBucket:"herbolife-store.firebasestorage.app",messagingSenderId:"922872122127",appId:"1:922872122127:web:001b4377661261b9cc4c7a"}),o=(0,s.ad)(n),i=(0,r.v0)(n)}},function(e){e.O(0,[358,728,943,145,971,117,744],function(){return e(e.s=3403)}),_N_E=e.O()}]);